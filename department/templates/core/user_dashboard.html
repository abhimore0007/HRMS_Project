
<h2>User Dashboard</h2>

<!-- Department, Role, and Manager Filters -->
<form method="get">
    <label>Department:</label>
    <select name="department">
        <option value="">All</option>
        {% for dept in departments %}
            <option value="{{ dept.id }}">{{ dept.name }}</option>
        {% endfor %}
    </select>

    <label>Role:</label>
    <select name="role">
        <option value="">All</option>
        {% for role in roles %}
            <option value="{{ role.id }}">{{ role.role_name }}</option>
        {% endfor %}
    </select>

    <label>Manager:</label>
    <select name="manager">
        <option value="">All</option>
        {% for manager in managers %}
            <option value="{{ manager.id }}">{{ manager.first_name }} {{ manager.last_name }}</option>
        {% endfor %}
    </select>

    <button type="submit">Filter</button>
</form>

<!-- User List -->
<h3>Employees</h3>
<table border="1">
    <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Department</th>
    </tr>
    {% for user in users %}
    <tr>
        <td>{{ user.first_name }} {{ user.last_name }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role.role_name }}</td>
        <td>{{ user.dept.name }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="4">No users found.</td></tr>
    {% endfor %}
</table>

<!-- Assigned Tasks -->
<h3>Assigned Tasks</h3>
<table border="1">
    <tr>
        <th>Task</th>
        <th>Status</th>
        <th>Assigned By</th>
        <th>Assigned Date</th>
        <th>Update</th>
    </tr>
    {% for task in assigned_tasks %}
    <tr>
        <td>{{ task.task.task_title }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.assigned_by.first_name }} {{ task.assigned_by.last_name }}</td>
        <td>{{ task.assigned_date }}</td>
        <td><a href="{% url 'update_task_status' task.assignment_id %}">Update</a></td>
    </tr>
    {% empty %}
    <tr><td colspan="5">No tasks assigned yet.</td></tr>
    {% endfor %}
</table>

